---
import Layout from "../layouts/Layout.astro";
import OffreCard from "../components/OffreCard.astro";

const offres = [
	{
		adresse: "2821 Lake Sevilla, Palm Harbor, TX",
		favori: true,
		id: "64l3n8nar836i5j",
		nbChambres: 4,
		nbSdb: 2,
		nomMaison: "Beverly Springfield",
		prix: 2700,
		surface: 45,
		imgUrl: "image1.png",
	},
	{
		adresse: "2699 Green Valley, Highland Lake",
		favori: true,
		id: "lo831zeg10hpm9y",
		nbChambres: 4,
		nbSdb: 2,
		nomMaison: "Palm Harbor",
		prix: 2095,
		surface: 42,
		imgUrl: "image2.png",
	},
	{
		adresse: "909 Woodland St, Michigan, IN",
		favori: false,
		id: "s1zuhj19x8eb242",
		nbChambres: 4,
		nbSdb: 3,
		nomMaison: "Faulkner Ave",
		prix: 4550,
		surface: 80,
		imgUrl: "image3.png",
	},
];
---

<Layout titre="Offres">
	<h1 class="text-3xl font-bold mb-6">Offres</h1>

	<div class="container mx-auto px-4">
		<button
			id="favori-button"
			class="bg-slate-600 rounded-lg text-white p-2 mb-4 hover:bg-slate-700 transition-colors"
		>
			Afficher les favoris
		</button>
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
			{
				offres.map((offre) => (
					<OffreCard
						nomMaison={offre.nomMaison}
						adresse={offre.adresse}
						nbChambres={offre.nbChambres}
						nbSdb={offre.nbSdb}
						surface={offre.surface}
						prix={offre.prix}
						favori={offre.favori}
						imgUrl={offre.imgUrl}
					/>
				))
			}
		</div>
	</div>
</Layout>

<script>
	const button = document.getElementById("favori-button");
	let showOnlyFavorites = false;

	button?.addEventListener("click", () => {
		showOnlyFavorites = !showOnlyFavorites;
		const offres = document.querySelectorAll<HTMLElement>(".offre");

		offres.forEach((offre) => {
			const isFavori = offre.dataset.favori === "true";

			if (showOnlyFavorites) {
				offre.style.display = isFavori ? "block" : "none";
				button.textContent = "Afficher tout";
			} else {
				offre.style.display = "block";
				button.textContent = "Afficher les favoris";
			}
		});
	});
</script>
